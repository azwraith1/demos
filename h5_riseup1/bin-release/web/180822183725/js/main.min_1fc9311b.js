var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n["throw"](e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}c((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,r&&(a=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(n){i=[6,n],r=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Stage=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.Stage);__reflect(Stage.prototype,"Stage");var TextField=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.TextField);__reflect(TextField.prototype,"TextField");var Sprite=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.Sprite);__reflect(Sprite.prototype,"Sprite");var Bitmap=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.Bitmap);__reflect(Bitmap.prototype,"Bitmap");var DisplayObject=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.DisplayObject);__reflect(DisplayObject.prototype,"DisplayObject");var Rectangle=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.Rectangle);__reflect(Rectangle.prototype,"Rectangle");var traceSimple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i="",n=0;n<e.length;n++)i+=e[n]+",";i=i.substr(0,i.length-1),game.LogManager.getIns().log(i)},game;!function(e){var t=function(){function e(){}return e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.SHAPE_RECT="shape rect",e.SHAPE_RECT_ROUND="shape rect round",e.SHAPE_CIRCLE="shape circle",e.VER_DEBUG="debug",e.VER_RELEASE="release",e}();e.Const=t,__reflect(t.prototype,"game.Const");var i=function(e){function t(){var t=e.call(this)||this;return t.dataEvent=new Object,t.init(),t.once(egret.Event.ADDED_TO_STAGE,t.addToStage,t),t}return __extends(t,e),t.prototype.addToStage=function(){this.render()},t.prototype.init=function(){},t.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},t.prototype.dispEvent=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),this.dataEvent){this.dataEvent[e]}},t.prototype.addEvent=function(e,t,i){void 0===i&&(i=null),this.dataEvent&&null==this.dataEvent[e]&&(t["this"]=i,this.dataEvent[e]=t)},t.prototype.removeEvent=function(e,t){this.dataEvent&&this.dataEvent[e]&&delete this.dataEvent[e]},t.prototype.removeFromParent=function(e){void 0===e&&(e=!1);var t=this.parent;e&&this.dispose(),t&&t.contains(this)&&t.removeChild(this),t=null},t.prototype.removeChildAll=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=2147483647),void 0===i&&(i=!1),(0>t||t>=this.numChildren)&&(t=this.numChildren-1);for(var n=e;t>=n;++n)this.removeChildIndex(e,i)},t.prototype.removeChildIndex=function(e,i){if(e>=0||e<this.numChildren){var n=this.getChildAt(e);if(n instanceof t)n.removeFromParent(i);else{var o=this.getChildAt(e);o.parent&&o.parent.removeChild(o)}}},t.prototype.dispose=function(){this.removeChildAll(0,-1,!0),this.dataEvent=null,this.stageWidth=null,this.stageHeight=null},t}(egret.DisplayObjectContainer);e.MoonContainer=i,__reflect(i.prototype,"game.MoonContainer");var n=function(e){function t(t,i,n){void 0===t&&(t=""),void 0===i&&(i=null),void 0===n&&(n=null);var o=e.call(this)||this;return o.type=t,o.data=i,o.currentTarget=n,o}return __extends(t,e),t.MOUSE_OVER="event-over",t.MOUSE_OUT="event-out",t.MOUSE_DOWN="event-down",t.MOUSE_MOVE="event-move",t.MOUSE_UP="event-up",t.CLICK="event-click",t.CHANGE="change",t.COMPLETE="complete",t.RENDER_COMPLETE="render complete",t.UPDATE="update",t.START="start",t.MOVE="move",t.OVER="over",t.PAUSE="pause",t.STOP="stop",t.PLAY="play",t.OPEN="open",t.CLOSE="close",t}(egret.EventDispatcher);e.MoonEvent=n,__reflect(n.prototype,"game.MoonEvent");var o=function(e){function i(){var i=e.call(this)||this;return i._type=t.SHAPE_RECT,i._color=0,i.display=new egret.Sprite,i.bg=new egret.Sprite,i}return __extends(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this._data.c=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"data",{set:function(e){this._data=e,this.draw()},enumerable:!0,configurable:!0}),i.prototype.draw=function(){this._color=this._data.c,this.display.graphics.clear(),this.display=this.getDisplay(this._data),this.addChild(this.display),this.setPosition()},i.prototype.setPosition=function(){this._hasBg&&this.type!=t.SHAPE_CIRCLE&&(this.display.x=this.bg.width-this.display.width>>1,this.display.y=this.bg.height-this.display.height>>1)},i.prototype.setBackground=function(e,t){void 0===t&&(t=1),this._hasBg=!0;var i=this._data,n={};for(var o in i)n[o]=i[o];n.c=e,n.w&&(n.w=n.w+2*t),n.h&&(n.h=n.h+2*t),n.r&&(n.r=n.r+t),this.bg.graphics.clear(),this.bg=this.getDisplay(n),this.addChildAt(this.bg,0),this.setPosition()},i.prototype.getDisplay=function(e){switch(this.type){case t.SHAPE_RECT:return r.getRect(e.w,e.h,e.c);case t.SHAPE_RECT_ROUND:return r.getRoundRect(e.w,e.h,e.c,e.ew,e.eh);case t.SHAPE_CIRCLE:return r.getCircle(e.r,e.c)}},i}(egret.Sprite);e.MoonDisplayObject=o,__reflect(o.prototype,"game.MoonDisplayObject");var r=function(){function t(){}return Object.defineProperty(t,"randomColor",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),t.getLineRect=function(e,t,i,n,o,r){void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0);var a=new egret.Sprite;return a.graphics.lineStyle(n,i),a.graphics.drawRect(o,r,e,t),a.graphics.endFill(),a},t.getLineCircle=function(e,t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0);var r=new egret.Sprite;return r.graphics.lineStyle(i,t),r.graphics.drawCircle(n,o,e),r.graphics.endFill(),r},t.getMatrixRect=function(e,t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=new egret.Sprite,a=new egret.Matrix;return a.createGradientBox(e,t,Math.PI*o,0,0),r.graphics.beginGradientFill(egret.GradientType.LINEAR,[i,n],[1,1],[0,255],a),r.graphics.drawRect(0,0,e,t),r.graphics.endFill(),r},t.getRect=function(e,t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=new egret.Sprite;return r.graphics.beginFill(i),r.graphics.drawRect(n,o,e,t),r.graphics.endFill(),r},t.getRectAndX=function(e,t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=this.getRect(e,t,i,n,o);return r.addChild(this.getX(e,t,i,1,n,o)),r},t.getX=function(e,t,i,n,o,r){void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0);var a=new egret.Sprite,s=new egret.Sprite;s.graphics.lineStyle(n,i),s.graphics.moveTo(0,0),s.graphics.lineTo(e,t);var c=new egret.Sprite;return c.graphics.lineStyle(n,i),c.graphics.moveTo(e,0),c.graphics.lineTo(0,t),a.addChild(s),a.addChild(c),a},t.getRoundRect=function(e,t,i,n,o,r,a){void 0===i&&(i=0),void 0===n&&(n=5),void 0===o&&(o=5),void 0===r&&(r=0),void 0===a&&(a=0);var s=new egret.Sprite;return s.graphics.beginFill(i),s.graphics.drawRoundRect(r,a,e,t,n,o),s.graphics.endFill(),s},t.getCircle=function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=new egret.Sprite;return o.graphics.beginFill(t),o.graphics.drawCircle(i,n,e),o.graphics.endFill(),o},t.getPolygon=function(e,t,i,n){void 0===e&&(e=3),void 0===t&&(t=10),void 0===i&&(i=0),void 0===n&&(n=0);var o=new egret.Sprite;o.rotation=n,o.graphics.beginFill(i);for(var r=0;e>=r;r++){var a=Math.cos(r*(360/e)*Math.PI/180)*t,s=Math.sin(r*(360/e)*Math.PI/180)*t;0==r?o.graphics.moveTo(a,s):o.graphics.lineTo(a,s)}return o.graphics.endFill(),o},t.getArrowRoundRect=function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=new egret.Sprite;r.addChild(this.getRoundRect(e,t,i));var a=this.getPolygon(3,e/3,n,30+o);return a.x=r.width>>1,a.y=r.height>>1,r.addChild(a),r},t.getScrollLineBar=function(e,t,i){for(var n=new egret.Sprite,o=t/3,r=0;3>r;r++){var a=this.getRect(e,1,i,0,r*o);n.addChild(a)}return n},t.getAddRoundRect=function(e,t,i){var n=new egret.Sprite;n.addChild(this.getRoundRect(e,t,i));var o=this.getRect(e/2,2,0,e/4,t/2-1),r=this.getRect(2,t/2,0,e/2-1,t/4);return n.addChild(o),n.addChild(r),n},t.getRemoveRoundRect=function(e,t,i){var n=new egret.Sprite;n.addChild(this.getRoundRect(e,t,i));var o=this.getRect(e/2,2,0,e/4,t/2-1);return n.addChild(o),n},t.getRoundRectText=function(e,t,i,n){void 0===n&&(n="click");var o=new egret.Sprite;o.addChild(this.getRoundRect(e,t,i));var r=new egret.TextField;return r.name="text",r.text=n,r.x=o.width-r.width>>1,r.y=o.height-r.height>>1,o.addChild(r),o},t.getSwitch=function(t,i,n){void 0===t&&(t=16777215),void 0===i&&(i=0),void 0===n&&(n=0);var o=e.MoonUI.getRoundRect(80,50,t,60,60);return o.addChild(e.MoonUI.getCircle(22,i,0==n?25:55,25)),o},t.getCheckBoxRect=function(e,t,i){void 0===e&&(e=16777215),void 0===t&&(t=0),void 0===i&&(i=0);var n=new egret.Sprite;if(n.addChild(this.getRect(40,40,e)),1==i){var o=new egret.Sprite;o.graphics.beginFill(t),o.graphics.moveTo(0,20),o.graphics.lineTo(20,36),o.graphics.lineTo(44,8),o.graphics.lineTo(36,0),o.graphics.lineTo(20,18),o.graphics.lineTo(12,8),o.graphics.lineTo(0,20),n.addChild(o)}return n},t.getRadioCircle=function(e,t,i){void 0===e&&(e=16777215),void 0===t&&(t=0),void 0===i&&(i=0);var n=new egret.Sprite;if(n.addChild(this.getCircle(16,e,16,16)),n.graphics.lineStyle(1,0),1==i){var o=this.getCircle(8,t,16,16);n.addChild(o)}return n},t.getGridding=function(e,t){void 0===t&&(t=0);var i=new egret.Sprite;i.graphics.lineStyle(.1,t);for(var n=e.width/e.x,o=e.height/e.y,r=0;r<e.x;r++)i.graphics.moveTo(0,r*o),i.graphics.lineTo(e.width,r*o);for(r=0;r<e.y;r++)i.graphics.moveTo(r*n,0),i.graphics.lineTo(r*n,e.height);return i},t.getHeart=function(e,t){void 0===e&&(e=15),void 0===t&&(t=16711680);var i=new egret.Sprite;return i.graphics.beginFill(t),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-e),i.graphics.cubicCurveTo(e,2.5*-e,2*e,1.5*-e,0,0),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-e),i.graphics.cubicCurveTo(-e,2.5*-e,2*-e,1.5*-e,0,0),i.graphics.endFill(),i.anchorOffsetX=-i.width/2,i.anchorOffsetY=-i.height,i},t}();e.MoonUI=r,__reflect(r.prototype,"game.MoonUI");var a=function(){function e(){}return e.fontName="黑体",e}();e.FONT=a,__reflect(a.prototype,"game.FONT");var s=function(t){function i(i,n){void 0===i&&(i=""),void 0===n&&(n=16777215);var o=t.call(this)||this;return o.text=new TextField,o.text.textAlign=egret.HorizontalAlign.LEFT,o.text.verticalAlign=egret.VerticalAlign.MIDDLE,o.text.text=i,o.text.textColor=n,o.text.fontFamily=e.FONT.fontName,o.addChild(o.text),o}return __extends(i,t),Object.defineProperty(i.prototype,"textField",{get:function(){return this.text},enumerable:!0,configurable:!0}),i}(i);e.Label=s,__reflect(s.prototype,"game.Label");var c=function(){function e(){}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(e){var t;t.textAlign=egret.HorizontalAlign.LEFT,e.addChild(t),this.txtSimple=t;var t=(new s).textField;t.size=25,e.addChild(t),this.txtMessage=t},e.prototype.debug=function(e){this.txtSimple.text=e},e.prototype.log=function(e){},e.prototype.logMessage=function(e){},e.prototype.setLogColor=function(e){this.txtSimple.textColor=e},e.prototype.setLogMessageColor=function(e){this.txtMessage.textColor=e},e}();e.LogManager=c,__reflect(c.prototype,"game.LogManager");var h=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.createText=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i="");var n=(new s).textField;return n.x=e,n.y=t,n.text=i,this.addChild(n),n},i.prototype.createRect=function(t,i,n,o,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var a=e.MoonUI.getRect(t,i,n,o,r);return this.addChild(a),a},i.prototype.createCircle=function(t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=e.MoonUI.getCircle(t,i,n,o);return this.addChild(r),r},i.prototype.createRectBySprite=function(e,t,i,n,o,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),e.graphics.clear(),e.graphics.beginFill(n),e.graphics.drawRect(o,r,t,i),e.graphics.endFill()},i.prototype.createBackground=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var i=this.createRect(this.stageWidth,this.stageHeight,e);return i.alpha=t,i.touchEnabled=!0,i},i.prototype.createBgGradientFill=function(e,t){void 0===e&&(e=96963),void 0===t&&(t=14540253);var i=this.stageWidth,n=this.stageHeight,o=new egret.Matrix;o.createGradientBox(i,n,Math.PI/2);var r=new Sprite;return r.graphics.beginGradientFill(egret.GradientType.LINEAR,[e,t],[1,1],[0,255],o),r.graphics.drawRect(0,0,i,n),this.addChild(r),r},i}(i);e.BasicView=h,__reflect(h.prototype,"game.BasicView");var l=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.play=function(){this.stop(),this.isPlay=!0,egret.startTick(this.loop,this)},i.prototype.stop=function(){this.isPlay=!1,egret.stopTick(this.loop,this)},i.prototype.loop=function(e){return traceSimple(e),!0},i.prototype.createButton=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=new e.BasicButton;return o.label=t,o.x=i,o.y=n,this.addChild(o),o},i}(h);e.GameView=l,__reflect(l.prototype,"game.GameView");var u=function(e){function t(t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=e.call(this)||this;return n.skinAutoScale=!0,n.statusNormal=t||p.buttonNormal,n.statusDown=i||p.buttonDown,n.skinContainer=new egret.DisplayObjectContainer,n.addChild(n.skinContainer),n.updateSkin(n.statusNormal),n.text=(new s).textField,n.addChild(n.text),n.open(),n}return __extends(t,e),t.prototype.open=function(){this.close(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.close=function(){this.touchEnabled=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},t.prototype.setLabelPoint=function(e,t){this.text.anchorOffsetX=0,this.text.anchorOffsetY=0,this.text.x=e,this.text.y=t},Object.defineProperty(t.prototype,"labelCircle",{set:function(e){this.text.text=e,this.skinAutoScale=!1,this.text.x=this.text.y=0,this.text.anchorOffsetX=this.text.textWidth>>1,this.text.anchorOffsetY=this.text.textHeight>>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelColor",{set:function(e){this.text.textColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.text.text},set:function(e){this.text.text=e;this.text.width+20;this.setSkinSize(),this.setTextPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFild",{get:function(){return this.text},enumerable:!0,configurable:!0}),t.prototype.setTextFlow=function(e){this.text.textFlow=e,this.setSkinSize(),this.setTextPosition()},t.prototype.setSkinNormal=function(){this.updateSkin(this.statusNormal)},t.prototype.setSkinDown=function(){this.updateSkin(this.statusDown)},t.prototype.onTouch=function(e){e.type==egret.TouchEvent.TOUCH_BEGIN?(this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusDown)):(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusNormal)),this.dispEvent(n.CLICK)},Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.text.width+20},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.text.height+20},enumerable:!0,configurable:!0}),t.prototype.setSkinSize=function(){if(this.skinAutoScale&&""!=this.text.text){var e=this.textWidth/this.statusNormal.width;this.statusNormal instanceof Bitmap?(this.statusNormal.width=this.textWidth,this.statusDown.width=this.textWidth):this.statusNormal.scaleX=this.statusDown.scaleX=e;var t=this.textHeight;t>=this.statusNormal.height&&(e=t/this.statusNormal.height,this.statusNormal instanceof Bitmap?(this.statusNormal.height=this.textHeight,this.statusDown.height=this.textHeight):this.statusNormal.scaleY=this.statusDown.scaleY=e)}},t.prototype.setTextPosition=function(){this.text.anchorOffsetX=this.text.width>>1,this.text.anchorOffsetY=this.text.height>>1,this.textWidth>this.statusNormal.width?this.text.x=this.textWidth>>1:this.text.x=this.statusNormal.width>>1,this.textHeight>this.statusNormal.height?this.text.y=this.textHeight>>1:this.text.y=this.statusNormal.height>>1},t.prototype.updateSkin=function(e){this.skinContainer.removeChildren(),this.skinContainer.addChild(e)},t.prototype.dispose=function(){this.close(),e.prototype.dispose.call(this)},t}(i);e.BasicButton=u,__reflect(u.prototype,"game.BasicButton",["game.IOnoff"]);var p=function(){function t(){}return Object.defineProperty(t,"randomRect",{get:function(){return e.MoonUI.getRect(60,60,e.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"randomCircle",{get:function(){return e.MoonUI.getCircle(50,e.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pointNormal",{get:function(){return e.MoonUI.getCircle(6,e.Color.black)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pointDown",{get:function(){return e.MoonUI.getCircle(6,e.Color.gray)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"buttonNormal",{get:function(){return e.MoonUI.getRect(60,60,e.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"buttonDown",{get:function(){return e.MoonUI.getRect(60,60,e.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"radioOff",{get:function(){return e.MoonUI.getRadioCircle(e.Color.white,e.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"radioOn",{get:function(){return e.MoonUI.getRadioCircle(e.Color.white,e.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"checkBoxOff",{get:function(){return e.MoonUI.getCheckBoxRect(e.Color.white,e.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"checkBoxOn",{get:function(){return e.MoonUI.getCheckBoxRect(e.Color.white,e.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"switchOff",{get:function(){return e.MoonUI.getSwitch(e.Color.skinNormal,e.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"switchOn",{get:function(){return e.MoonUI.getSwitch(e.Color.skinNormal,e.Color.white,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"progressBackground",{get:function(){return e.MoonUI.getRect(300,20,e.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"progressValue",{get:function(){return e.MoonUI.getRect(300,20,e.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"sliderBackground",{get:function(){return e.MoonUI.getRect(300,10,e.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"sliderValue",{get:function(){return e.MoonUI.getRect(300,10,e.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"sliderBar",{get:function(){return e.MoonUI.getCircle(15,e.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"scrollBar",{get:function(){return e.MoonUI.getRect(10,10,e.Color.skinNormal)},enumerable:!0,configurable:!0}),t.getRodatioButton=function(t){var i=new u(e.Skin.radioOff,e.Skin.radioOn);return i.skinAutoScale=!1,i.label=t,i.labelColor=e.Color.black,i.setLabelPoint(40,0),i},t.getCheckBox=function(t){var i=[e.Skin.checkBoxOff,e.Skin.checkBoxOff,e.Skin.checkBoxOn,e.Skin.checkBoxOn],n=new e.MoreSkinButton(i);return n.skinAutoScale=!1,n.label=t,n.toggleSwitch=!0,n.labelColor=e.Color.black,n.setLabelPoint(50,2),n},t}();e.Skin=p,__reflect(p.prototype,"game.Skin");var d=function(){function e(){}return Object.defineProperty(e,"random",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"white",{get:function(){return 16777215},enumerable:!0,configurable:!0}),Object.defineProperty(e,"black",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"gray",{get:function(){return 6710886},enumerable:!0,configurable:!0}),Object.defineProperty(e,"red",{get:function(){return 16711680},enumerable:!0,configurable:!0}),Object.defineProperty(e,"green",{get:function(){return 65280},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bule",{get:function(){return 255},enumerable:!0,configurable:!0}),Object.defineProperty(e,"skinNormal",{get:function(){return 1382684},enumerable:!0,configurable:!0}),Object.defineProperty(e,"skinDown",{get:function(){return 10066329},enumerable:!0,configurable:!0}),Object.defineProperty(e,"titleBackground",{get:function(){return 2106923},enumerable:!0,configurable:!0}),e.getRandomArray=function(e){for(var t=[],i=0;e>i;i++)t.push(16777215*Math.random());return t},e.lightenDarkenColor=function(e,t){var i=(e>>16)+t;i>255?i=255:0>i&&(i=0);var n=(e>>8&255)+t;n>255?n=255:0>n&&(n=0);var o=(255&e)+t;return o>255?o=255:0>o&&(o=0),o|n<<8|i<<16},e}();e.Color=d,__reflect(d.prototype,"game.Color");var g=function(e){function t(t){var i=e.call(this,t[0],t[1])||this;return i._currentPage=0,i.skins=t,i}return __extends(t,e),t.prototype.updatePage=function(e){this.currentPage=e,this.setSkinNormal()},Object.defineProperty(t.prototype,"currentPage",{get:function(){return this._currentPage},set:function(e){e=2*e==this.skins.length?0:e,this._currentPage=e,this.statusNormal=this.skins[2*e],this.statusDown=this.skins[2*e+1],this.setSkinSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toggleSwitch",{set:function(e){this._toggleSwitch=e},enumerable:!0,configurable:!0}),t.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_END&&this._toggleSwitch&&(this.currentPage=1-this.currentPage),e.prototype.onTouch.call(this,t)},t}(u);e.MoreSkinButton=g,__reflect(g.prototype,"game.MoreSkinButton");var f=function(e){function t(t){void 0===t&&(t="");var i=e.call(this)||this;return""!=t&&(i.skinName=t,i.position=new egret.Point,i.addBitmap(),i.bgWidth=i.width,i.bgHeight=i.height),i}return __extends(t,e),t.prototype.addBitmap=function(){RES.hasRes(this.skinName)?(this.skinImag=new S(this.skinName),this.skinImag.smoothing=!0,this.addChild(this.skinImag)):egret.error("找不到key"+this.skinName)},t.prototype.setAnchorCenter=function(){this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1},t}(i);e.Imag=f,__reflect(f.prototype,"game.Imag");var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.index=0,t}return __extends(t,e),t.prototype.addItem=function(e){this.items.push(e)},t.prototype.removeItem=function(e){this.hasItem(e)&&this.items.splice(e,1)},t.prototype.getItem=function(e){return this.items[e]},t.prototype.hasItem=function(e){return this.items.length>0&&e>=0&&e<this.items.length},t.prototype.getNextItem=function(){return this.items[this.index++]},t.prototype.reset=function(){this.index=0},t}(f);e.basicContainer=y,__reflect(y.prototype,"game.basicContainer");var m=function(e){function i(t,i){void 0===i&&(i=1);var n=e.call(this)||this;n.skinName=t;for(var o=0;i>o;o++)n.items.push(n.getBitmap());return n}return __extends(i,e),i.prototype.getBitmap=function(){var e;return RES.hasRes(this.skinName)&&(e=new S(this.skinName),this.addChild(e)),e},i.prototype.layout=function(e,i){void 0===i&&(i=0),e==t.VERTICAL?v.displayRank(this.items,1,i,i,0,0):e==t.HORIZONTAL&&v.displayRank(this.items,this.items.length,i,i,0,0)},i.prototype.setMultiLine=function(e,t){void 0===t&&(t=0),v.displayRank(this.items,e,t,t,0,0)},i}(y);e.imageChartlet=m,__reflect(m.prototype,"game.imageChartlet",["game.ILayout"]);var v=function(){function e(){}return e.displayRank=function(e,t,i,n,o,r,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===a&&(a=1);for(var s,c=0;c<e.length;c++)s=e[c],s.x=o+Math.floor(c%t)*(s.width+i)*a,s.y=r+Math.floor(c/t)*(s.height+n)*a},e}();e.SimpleLayout=v,__reflect(v.prototype,"game.SimpleLayout");var _=function(e){function t(t,i,n,o){void 0===t&&(t=""),void 0===o&&(o="png");for(var r=e.call(this)||this,a=i;n>=a;a++)r.items.push(t+a+"_"+o);return r.skinName=r.getItem(0),r.addBitmap(),r.createTime(),r}return __extends(t,e),t.prototype.createTime=function(){null==this.timer&&(this.timer=new egret.Timer(1e3/this.ftp,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this))},t.prototype.onTimer=function(){this.hasItem(++this.index)?this.gotoAndStop(this.index):this.loop?(this.reset(),this.gotoAndStop(this.index)):this.timer.stop()},t.prototype.gotoAndStop=function(e){this.hasItem(e)&&(this.index=e,this.skinName=this.getItem(e),this.update())},t.prototype.gotoAndPlay=function(e){this.index=e,this.play()},t.prototype.play=function(){this.timer.start()},t.prototype.stop=function(){this.timer.stop()},t.prototype.update=function(){RES.hasRes(this.skinName)&&(this.skinImag.texture=RES.getRes(this.skinName))},Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ftp",{set:function(e){this.removeTime(),this.createTime()},enumerable:!0,configurable:!0}),t.prototype.removeTime=function(){null!=this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer=null)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.removeTime()},t}(y);e.imageAnimation=_,__reflect(_.prototype,"game.imageAnimation");var E=function(){function e(){}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.setImage=function(e){this.image=e},e.prototype.setStageWH=function(e,t){this.tw=e,this.th=t},e.prototype.setTop=function(e){this.image.y=e},e.prototype.setBottom=function(e){this.image.y=this.th-this.image.height-e},e.prototype.setLeft=function(e){this.image.x=e},e.prototype.setRight=function(e){this.image.x=this.tw-this.image.width-e},e.prototype.setCenterX=function(e){void 0===e&&(e=0),this.image.x=(this.tw-this.image.width>>1)+e},e.prototype.setCenterY=function(e){void 0===e&&(e=0),this.image.y=(this.tw-this.image.width>>1)+e},e}();e.imageLayout=E,__reflect(E.prototype,"game.imageLayout");var S=function(e){function t(t,i){void 0===i&&(i=null);var n=e.call(this)||this;return RES.hasRes(t)?(n.texture=RES.getRes(t),n.scale9Grid=i||new Rectangle(8,8,2,2)):egret.error("找不到资源："+t),n}return __extends(t,e),t}(Bitmap);e.Scale9Image=S,__reflect(S.prototype,"game.Scale9Image")}(game||(game={}));var Proxy=function(){function e(){}return e.NET_PROXY="netProxy",e.WEIXIN_PROXY="weixinProxy",e.PLAYER_PROXY="playerProxy",e.AUDIO_PROXY="audioProxy",e}();__reflect(Proxy.prototype,"Proxy");var BaseMediator=function(e){function t(t,i){void 0===t&&(t=""),void 0===i&&(i=null);var n=e.call(this,t,i)||this;return n.isInitialized=!1,n.isPopUp=!1,n.ui=null,n.w=0,n.h=0,n.type="panel",n}return __extends(t,e),t.prototype.showUI=function(e,t,i,n,o,r){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!1),this.ui=e,this.beforShow(),this.initUI(),this.initData(),PopUpManager.addPopUp(e,t,i,n,o,r)},t.prototype.beforShow=function(){},t.prototype.initUI=function(){},t.prototype.closeViewComponent=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:switch(t=this.type){case"panel":return[3,1];case"scene":return[3,4]}return[3,5];case 1:return this.viewComponent?[4,PopUpManager.removePopUpAsync(this.viewComponent,e)]:[3,3];case 2:i.sent(),this.viewComponent=null,i.label=3;case 3:return[3,5];case 4:return this.viewComponent&&(game.UIUtils.removeSelf(this.viewComponent),this.viewComponent=null),[3,5];case 5:return[2]}})})},t.prototype.initData=function(){},t.prototype.closePanel=function(e,t){void 0===e&&(e=0),PopUpManager.removePopUp(this.ui,e),this.destroy()},t.prototype.destroy=function(){},t.prototype.getIsPopUp=function(){return this.isPopUp},t.prototype.getIsInit=function(){return this.isInitialized},t.prototype.getWidth=function(){return this.ui.width},t.prototype.getHeight=function(){return this.ui.height},t}(puremvc.Mediator);__reflect(BaseMediator.prototype,"BaseMediator",["puremvc.IMediator","puremvc.INotifier"]);var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTouchTap,t),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t}return __extends(t,e),t.prototype.onAdded=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)},t.prototype.onRemoved=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.destroy()},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.init&&this.init()},t.prototype.destory=function(e){egret.Tween.get(this).to({alpha:0},200).call(function(){e&&e()},this)},t.prototype.onShowAnimateOver=function(){},t.prototype.onTouchTap=function(e){},t.prototype.bindTouchEnded=function(e){if(e){e.name&&this[e.name+"TouchEnded"]&&e.addEventListener(egret.TouchEvent.TOUCH_END,this[e.name+"TouchEnded"],this);for(var t=e.numChildren,i=0;t>i;i++){var n=e.getChildAt(i);this.bindTouchEnded(n)}}},t.prototype.destroy=function(){this.resGroup},t}(eui.Component);e.BaseComponent=t,__reflect(t.prototype,"game.BaseComponent")}(game||(game={}));var game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){},t}(puremvc.SimpleCommand);e.ControllerPrepCommand=t,__reflect(t.prototype,"game.ControllerPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){},t}(puremvc.SimpleCommand);e.ModelPrepCommand=t,__reflect(t.prototype,"game.ModelPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.initializeMacroCommand=function(){this.addSubCommand(e.ControllerPrepCommand),this.addSubCommand(e.ModelPrepCommand),this.addSubCommand(e.ViewPrepCommand)},i}(puremvc.MacroCommand);
e.StartUpCommand=t,__reflect(t.prototype,"game.StartUpCommand")}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){t.getBody();this.facade.registerMediator(new e.StartMediator)},i}(puremvc.SimpleCommand);e.ViewPrepCommand=t,__reflect(t.prototype,"game.ViewPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var GameConfig;!function(e){function t(){var e=window.navigator.userAgent.toLowerCase(),t=""+e.match(/MicroMessenger/i);return"null"==t?!1:"micromessenger"==t?!0:void 0}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function n(){var e=window.navigator.userAgent.toLowerCase();""+e.match(/MicroMessenger/i);return""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function o(){var e=window.navigator.userAgent.toLowerCase();return""+e.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+e.match(/qzone/i)=="qzone"?"qzone":""+e.match(/weibo/i)=="weibo"?"weibo":""+e.match(/qq/i)=="qq"?"qq":""+e.match(/renren/i)=="renren"?"renren":""+e.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+e.match(/douban/i)=="douban"?"douban":"other"}function r(){return egret.MainContext.instance.stage}function a(){return egret.MainContext.instance.stage.stageWidth}function s(){return egret.MainContext.instance.stage.stageHeight}e.WINSIZE_WIDTH=750,e.WINSIZE_HEIGHT=1334,e.WINSIZE_WIDTH_BILI=1,e.WINSIZE_HEIGHT_BILI=1,e.SERVER_PATH="http://wx.yutong.com/vote/vote/index.php?m=ylyd&a=",e.GAME_ID="1",e.KIT_ID_1="90003546",e.KIT_ID_2="79371488",e.ROOM_ID="1",e.PLAYERS={},e.DEBUG_MODEL=!0,e.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},e.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},e.isWeiXin=t,e.isBigScreen=i,e.systemType=n,e.platformType=o,e.curStage=r,e.curWidth=a,e.curHeight=s}(GameConfig||(GameConfig={}));var Global;!function(e){}(Global||(Global={}));var game;!function(e){var t=function(){function e(){}return e.START_GAME_1="START_GAME_1",e.ADD_SCORE="ADD_SCORE",e}();e.ClientNotify=t,__reflect(t.prototype,"game.ClientNotify")}(game||(game={}));var Command=function(){function e(){}return e.START_UP="startUpCommond",e}();__reflect(Command.prototype,"Command");var game;!function(e){var t=function(){function e(){}return e.WINSIZE_WIDTH=640,e.WINSIZE_HEIGHT=1024,e.PASS_LEVEL=8,e.GAME_NAME="眼神不好,坚持不了3步哦",e.SERVER_PATH="http://www.huhugame.com/index.php?id=100004&m=api&c=huhugame&a=",e.DEBUG_MODAL=!0,e.WEIXIN_DEBUG=!1,e.CARE_URL="http://mp.weixin.qq.com/s?__biz=MzIzMzEzNTY5MA==&mid=504974636&idx=1&sn=95e01113efed89ab29d93566d55a8d85&scene=1&srcid=0416DNjhHqtgJLQCtvmKm9ck#wechat_redirect",e}();e.Constant=t,__reflect(t.prototype,"game.Constant")}(game||(game={}));var Mediator=function(){function e(){}return e.LOGIN_MEDIATOR="loginMediator",e.APPLICATION_MEDIATOR="applicationMediator",e.MAINSCENE_MEDIATOR="mainSceneMediator",e.WEIXIN_MEDIATOR="weixinMediator",e.TIPS_MEDIATOR="tipsMediator",e.SHARE_MEDIATOR="shareMediator",e.GAME_MEDIATOR="GameMediator",e.GAME_OVER_MEDIATOR="GameOverMediator",e.REWARD_GIFT_MEDIATOR="GameGiftMediator",e.PLAYER_INFO_MEDIATOR="PlayerInfoMediator",e.RANK_MEDIATOR="RankMediator",e.FRIENDHELP_MEDIATOR="FriendHelpMediator",e.FRIENDHELP_SUCCESS_MEDIATOR="FriendHelpSuccessMediator",e.GAME_DESC_MEDIATOR="GameDescMedaitor",e}();__reflect(Mediator.prototype,"Mediator");var Notifier=function(){function e(){}return e.START_GAME="START_GAME_NOTIFIER",e.SHOW_VIEW="SHOW_VIEW",e.POP_VIEW="POP_VIEW",e.PUSH_VIEW="PUSH_VIEW",e.PRELOAD_OVER="PRELOAD_OVER",e.PLAY_GAME="PLAY_GAME",e.CLOSE_GAME="CLOSE_GAME",e.CLOSE_MAIN="CLOSE_MAIN",e.OPEN_DESC_SCENE="OPEN_DESC_SCENE",e.CLOSE_DESC="CLOSE_DESC",e.GAME_OVER="GAME_OVER",e.SHOW_GIFT="SHOW_GIFT",e.CLOSE_GIFT="CLOSE_GIFT",e.SHOW_TIPS="SHOW_TIPS",e.CLOSE_TIPS="CLOSE_TIPS",e.NO_COUNT="NO_COUNT",e.CLOSE_SHARE="CLOSE_SHARE",e.OPEN_SHARE="OPEN_SHARE",e.OPEN_REGISTER="OPEN_REGISTER",e.CLOSE_REGISTER="CLOSE_REGISTER",e.SHARE_TOQQ="SHARE_TOQQ",e.OPEN_RANK="OPEN_RANK",e.CLOSE_RANK="CLOSE_RANK",e.OPEN_FRIENDHELP="OPEN_FRIENDHELP",e.CLOSE_FRIENDHELP="CLOSE_FRIENDHELP",e.OPEN_FRIENDHELP_SUCCESS="OPEN_FRIENDHELP_SUCCESS",e.CLOSE_HELP_SUCCESS="CLOSE_HELP_SUCCESS",e}();__reflect(Notifier.prototype,"Notifier");var PanelNotify=function(){function e(){}return e.OPEN_GAME_OVER="OPEN_GAME_OVER",e.CLOSE_GAME_OVER="CLOSE_GAME_OVER",e.SHOW_RESULT="SHOW_RESULT",e.CLOSE_RESULT="CLOSE_RESULT",e.OPEN_DESC="OPEN_DESC",e.CLOSE_DESC="CLOSE_DESC",e.OPEN_LOOK="OPEN_LOOK",e.CLOSE_LOOK="CLOSE_LOOK",e.OPEN_BALLON_SKIN="PanelNotify_OPEN_BALLON_SKIN",e.CLOSE_BALLON_SKIN="PanelNotify_CLOSE_BALLON_SKIN",e}();__reflect(PanelNotify.prototype,"PanelNotify");var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i.prototype.initializeController=function(){t.prototype.initializeController.call(this),this.registerCommand(Command.START_UP,e.StartUpCommand)},i.prototype.startUp=function(e){this.sendNotification(Command.START_UP,e),this.removeCommand(Command.START_UP)},i}(puremvc.Facade);e.AppFacade=t,__reflect(t.prototype,"game.AppFacade",["puremvc.IFacade","puremvc.INotifier"])}(game||(game={}));var SceneNotify=function(){function e(){}return e.OPEN_LOGIN="SceneNotify_OPEN_LOGIN",e.CLOSE_LOGIN="SceneNotify_CLOSE_LOGIN",e.OPEN_START="SceneNotify_OPEN_START",e.CLOSE_START="SceneNotify_CLOSE_START",e.OPEN_GAME="SceneNotify_OPEN_GAME",e.CLOSE_GAME="SceneNotify_CLOSE_GAME",e.OPEN_GAME_OVER="SceneNotify_OPEN_GAME_OVER",e.CLOSE_GAME_OVER="SceneNotify_CLOSE_GAME_OVER",e.OPEN_BALLON_SKIN="SceneNotify_OPEN_BALLON_SKIN",e.CLOSE_BALLON_SKIN="SceneNotify_CLOSE_BALLON_SKIN",e}();__reflect(SceneNotify.prototype,"SceneNotify");var SysNotify=function(){function e(){}return e.CHOOSE_ANSWER="CHOOSE_ANSWER",e.SERVER_BACK_DATA="SERVER_BACK_DATA",e.PLAYER_JOIN="PLAYER_JOIN",e.PLAYER_LEAVE="PLAYER_LEAVE",e.READY="SysNotify_READY",e.START_GAME="SysNotify_START_GAME",e.NEXT_GAME="SysNotify_NEXT_GAME",e.YOU_CHOOSE="SysNotify_YOU_CHOOSE",e.PLAYER_MOVE_CALL="SysNotify_PLAYER_MOVE_CALL",e.SHOW_RESULT="SysNotify_SHOW_RESULT",e.YOU_WIN="SysNotify_YOU_WIN",e.OTHER_LESS="SysNotify_OTHER_LESS",e}();__reflect(SysNotify.prototype,"SysNotify");var game;!function(e){var t=function(){function e(){}return e}();e.BallonBean=t,__reflect(t.prototype,"game.BallonBean")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e}();e.LevelBean=t,__reflect(t.prototype,"game.LevelBean")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"Score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{set:function(e){this._score=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BalloonImag",{get:function(){return this._balloonImag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"balloonImag",{set:function(e){this._balloonImag=e},enumerable:!0,configurable:!0}),e}();e.PlayerBean=t,__reflect(t.prototype,"game.PlayerBean")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e}();e.WallBean=t,__reflect(t.prototype,"game.WallBean")}(game||(game={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var game;!function(e){var t=function(e){function t(t,i){var n=e.call(this)||this;return n.colors=[10],n.removeBodys=[],n.world=new p2.World({gravity:[t,i]}),n.addEventListener(egret.Event.ENTER_FRAME,n.updateWorld,n),n}return __extends(t,e),Object.defineProperty(t.prototype,"P2World",{get:function(){return this.world},enumerable:!0,configurable:!0}),t.prototype.getBody=function(e,t){void 0===e&&(e=0),void 0===t&&(t=p2.Body.DYNAMIC);var i=new p2.Body({mass:e});return i.type=t,i.userData={},i},t.prototype.createPlane=function(e,t,i){void 0===e&&(e=Math.PI);var n=new p2.Plane,o=this.getBody(0,p2.Body.STATIC);return o.addShape(n),o.angle=e,o.position[0]=t,o.position[1]=i,this.world.addBody(o),o},t.prototype.createCircleBodyShape=function(e,t){void 0===t&&(t=p2.Body.DYNAMIC);var i=this.getBody(10,t),n=new p2.Circle({radius:e});return i.addShape(n),this.world.addBody(i),i},t.prototype.createBoxBodyShape=function(e,t,i,n){void 0===i&&(i=p2.Body.DYNAMIC),void 0===n&&(n=0);var o=this.getBody(10,i),r=new p2.Box({width:e,height:t});return o.addShape(r),o.angle=n,this.world.addBody(o),o},t.prototype.createConvexBodyShape=function(e,t){void 0===t&&(t=p2.Body.DYNAMIC);var i=this.getBody(10,t);return i.fromPolygon(e,{optimalDecomp:!1}),this.world.addBody(i),i},t.prototype.createPolygon=function(e,t,i){void 0===e&&(e=3),void 0===t&&(t=30),void 0===i&&(i=p2.Body.DYNAMIC);for(var n=(this.getBody(10,i),[]),o=0;e>o;o++){var r=Math.cos(o*(360/e)*Math.PI/180)*t,a=Math.sin(o*(360/e)*Math.PI/180)*t;n.push([r,a])}return this.createConvexBodyShape(n,i)},t.prototype.createBoxCircleBodyShape=function(e,t,i){void 0===i&&(i=p2.Body.DYNAMIC);var n=this.getBody(10,i);n.fixedRotation=!0,e/=2,t/=1.5;var o=new p2.Box({width:e,height:t}),r=new p2.Circle({radius:e/2});return n.addShape(o),n.addShape(r),o.position[1]=-t,r.position[1]=-e/2,this.world.addBody(n),n},t.prototype.drawSkin=function(e){var t=new egret.Sprite,i=this.colors[e.type];t.graphics.lineStyle(1,i,1),t.graphics.beginFill(i,.5);for(var n=0;n<e.shapes.length;n++){var o=e.shapes[n],r=new egret.Point(o.position[0],o.position[1]);if(o instanceof p2.Box){var a=o.width,s=o.height,c=a/2,h=s/2;t.graphics.moveTo(r.x,r.y),t.graphics.lineTo(r.x-c,r.y-h),t.graphics.drawRect(r.x-c,r.y-h,a,s),t.graphics.endFill()}else if(o instanceof p2.Convex){var l=o.vertices,u=l.length,p=l[0];t.graphics.moveTo(0,0),t.graphics.lineTo(p[0],p[1]);for(var d=0;u>d;d++)p=l[d],0==d?t.graphics.moveTo(p[0],p[1]):t.graphics.lineTo(p[0],p[1]);var p=l[0];t.graphics.lineTo(p[0],p[1]),t.graphics.endFill()}else if(o instanceof p2.Circle){var g=o.radius;t.graphics.moveTo(r.x,r.y),t.graphics.lineTo(r.x,g+r.y),t.graphics.drawCircle(r.x,r.y,g),t.graphics.endFill()}}return t.x=e.position[0],t.y=e.position[1],e.userData.skin=t,this.addChild(t),t},t.prototype.updateWorld=function(e){var t=1/60,i=this.removeBodys;this.world.step(t);for(var n=this.world.bodies,o=n.length,r=0;o>r;r++){var a=n[r];if(a.userData&&a.userData.skin){var s=a.userData.skin;s.x=a.position[0],s.y=a.position[1],s.rotation=180*a.angle/Math.PI}else!(a.shapes[0]instanceof p2.Plane)}for(r=0;r<i.length;r++)a=i[r],a.userData&&a.userData.skin&&(s=a.userData.skin,null!=s.parent,a.userData=null),this.world.removeBody(a)},t.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},t}(egret.DisplayObjectContainer);e.P2World=t,__reflect(t.prototype,"game.P2World")}(game||(game={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t.prototype.setProgress=function(e,t){},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var GameLayerManager=function(e){function t(){var t=e.call(this)||this;return t.sceneLayer=new eui.UILayer,t.mainLayer=new eui.UILayer,t.panelLayer=new eui.UILayer,t.effectLayer=new eui.UILayer,t.maskLayer=new eui.UILayer,t.loadLayer=new eui.UILayer,t.init(),t}return __extends(t,e),t.gameLayer=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.touchThrough=!0,this.sceneLayer.touchThrough=!0,this.mainLayer.touchThrough=!0,this.panelLayer.touchThrough=!0,this.effectLayer.touchThrough=!0,this.maskLayer.touchThrough=!0,this.loadLayer.touchThrough=!0,this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},t}(eui.UILayer);__reflect(GameLayerManager.prototype,"GameLayerManager");var PopUpManager;!function(e){function t(e,t,i,n,o,r){if(void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!1),!GameLayerManager.gameLayer().panelLayer.contains(e)){if(e.name="Panel"+e.hashCode,e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,t){var a=new egret.Sprite;a.graphics.clear(),a.graphics.beginFill(0,.65),a.graphics.drawRect(0,0,GameConfig.curWidth(),GameConfig.curHeight()),a.graphics.endFill(),a.name="Drak"+e.hashCode,a.width=GameConfig.curWidth(),a.height=GameConfig.curHeight(),GameLayerManager.gameLayer().panelLayer.contains(a)||GameLayerManager.gameLayer().panelLayer.addChild(a),a.touchEnabled=!0,egret.Tween.get(a).to({alpha:1},150),a.visible=!0}GameLayerManager.gameLayer().panelLayer.addChild(e),GameConfig.curPanel=e,0!=i?(e.x=GameConfig.curWidth()/2-i/2,e.y=GameConfig.curHeight()/2-n/2-e.anchorOffsetY):(i=e.width,n=e.height);var s=GameConfig.curWidth()/2-i/2,c=GameConfig.curHeight()/2-n/2;switch(o){case 0:break;case 7:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4+e.anchorOffsetX,y:e.y-n/4+e.anchorOffsetY},600,egret.Ease.elasticOut);break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4+e.anchorOffsetX,y:e.y-n/4+e.anchorOffsetY},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x,y:e.y},600,egret.Ease.elasticOut);break;case 3:r?(e.x=-i,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=-i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 4:r?(e.x=i,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 5:r?(e.y=-n,egret.Tween.get(e).to({y:c},500,egret.Ease.cubicOut)):(e.y=-n,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut));break;case 6:r?(e.y=GameConfig.curHeight(),egret.Tween.get(e).to({y:c},500,egret.Ease.cubicOut)):(e.y=n,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}}}function i(e,t){void 0===t&&(t=0);var i=this;return new Promise(function(n,o){var r="Drak"+e.hashCode,a=GameLayerManager.gameLayer().panelLayer.getChildByName(r),s=function(){GameLayerManager.gameLayer().panelLayer.contains(a)&&GameLayerManager.gameLayer().panelLayer.removeChild(a)};switch(a&&egret.Tween.get(a).to({alpha:0},100).call(s,i),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var c=500;0==t&&(c=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(e)&&(GameLayerManager.gameLayer().panelLayer.removeChild(e),n())},i,c)})}function n(e,t){void 0===t&&(t=0);var i="Drak"+e.hashCode,n=GameLayerManager.gameLayer().panelLayer.getChildByName(i),o=function(){GameLayerManager.gameLayer().panelLayer.contains(n)&&GameLayerManager.gameLayer().panelLayer.removeChild(n)};switch(n&&egret.Tween.get(n).to({alpha:0},100).call(o,this),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var r=500;0==t&&(r=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(e)&&(GameLayerManager.gameLayer().panelLayer.removeChild(e),e=null)},this,r)}function o(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1),GameLayerManager.gameLayer().sceneLayer.contains(e)||GameLayerManager.gameLayer().sceneLayer.addChild(e)}function r(e){GameLayerManager.gameLayer().sceneLayer.contains(e)&&GameLayerManager.gameLayer().sceneLayer.removeChild(e)}e.addPopUp=t,e.removePopUpAsync=i,e.removePopUp=n,e.addSceneUp=o,e.removeSceneUp=r}(PopUpManager||(PopUpManager={}));var game;!function(e){var t=function(e){function t(){return e.call(this,t.NAME)||this}return __extends(t,e),t.prototype.init=function(){var e=egret.localStorage.getItem("xsyx.sound");this.isOpen=e&&"0"===e?!1:!0,console.log("this.isOpen:"+this.isOpen)},t.prototype.closeBgMusic=function(){this.isOpen&&this.channel&&(this.channel.stop(),this.backgroundSound=null)},t.prototype.setVolice=function(e){this.moveChannel&&(this.moveChannel.volume=e)},t.prototype.startBgMusic=function(){this.isOpen&&(this.backgroundSound||(this.backgroundSound=RES.getRes("background_mp3"),this.channel&&(this.channel.stop(),this.channel=null),this.channel=this.backgroundSound.play(0,-1)))},t.prototype.openSound=function(e){if(this.isOpen=e,egret.localStorage.setItem("xsyx.sound",e?"1":"0"),e){if(this.channel)return;this.backgroundSound=RES.getRes("background_mp3"),this.channel=this.backgroundSound.play(0,-1)}else this.channel&&this.channel.stop(),this.channel=null},t.prototype.playSound=function(e){if(this.isOpen){var t=RES.getRes(e);t.play(0,1)}},t.prototype.playSoundCount=function(e,t,i){if(void 0===i&&(i=1),this.isOpen){var n=RES.getRes(e);this.moveChannel=n.play(0,t),this.moveChannel.volume=i}},t.NAME=Proxy.AUDIO_PROXY,t}(puremvc.Proxy);e.AudioProxy=t,__reflect(t.prototype,"game.AudioProxy",["puremvc.IProxy","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),Object.defineProperty(i.prototype,"playerBean",{get:function(){return this.playerInfo.score},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playerBeans",{set:function(t){this.playerInfo=new e.PlayerBean,this.playerInfo.score=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"BallonBean",{get:function(){return this.BallonBean},set:function(e){this.ballonInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"LevelBeans",{get:function(){return this.LevelBean},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"LevelBean",{set:function(e){this.levelInfo=e,this.point=e.point},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"WallBean",{get:function(){return this.wallInfo},set:function(e){this.wallInfo=e},enumerable:!0,configurable:!0}),i}(puremvc.Proxy);e.PlayerProxy=t,__reflect(t.prototype,"game.PlayerProxy",["puremvc.IProxy","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){var n=t.call(this,i.NAME)||this;return n.shareServerIndex=0,n.shareServerURLArr=[e.Constant.SERVER_PATH+"share"],n}return __extends(i,t),i.prototype.init=function(){this.config()},i.prototype.config=function(){var t=this.facade.retrieveProxy(Proxy.PLAYER_PROXY),i=this.facade.retrieveProxy(Proxy.NET_PROXY),n=window.wx,o=encodeURIComponent(window.location.href.split("#")[0]),r=this.shareServerURLArr[this.shareServerIndex],a={gameid:t.gameId,openid:t.openId,url:o},s=this;i.sendRequest(r,a,function(t){n.config({debug:e.Constant.WEIXIN_DEBUG,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),n.ready(function(){n.checkJsApi({jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],success:function(e){s.share(t.url)}})}),n.error(function(e){s.shareServerIndex++,s.shareServerIndex>=s.shareServerURLArr.length?alert("wx.error: "+JSON.stringify(e)):s.config()})})},i.prototype.share=function(e,t){void 0===t&&(t=null),this.shareURL=e,t="心中有尺，手上有度，玩转“瀚海海尚—眼神不好坚持不了3步”，就有终极大奖等着你哦！";var i=window.wx,n={title:"坚持3步？比比你的眼力价！",desc:t,link:e,imgUrl:"https://mmbiz.qlogo.cn/mmbiz/0ay5PNUR5AUiaIFIa33h9HLnoaUia5Xyuiaz94q0UVjgNK6Ozbca3icg5oxQSRGY976RNtHfFDUQxpiav7u0IuQ7EFg/0?wx_fmt=png"},o={};for(var r in n)o[r]=n[r];o.success=function(){},i.onMenuShareTimeline(o),i.onMenuShareAppMessage(n),i.onMenuShareQQ(n),i.onMenuShareWeibo(n)},i.prototype.changeShareText=function(e){this.share(this.shareURL,e)},i.NAME=Proxy.WEIXIN_PROXY,i}(puremvc.Proxy);e.WeixinProxy=t,__reflect(t.prototype,"game.WeixinProxy",["puremvc.IProxy","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.removeFromParent=function(e){e&&e.parent&&e.parent.removeChild(e)},e.addButtonScaleEffects=function(t){if(t)if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else for(var i=t.numChildren,n=0;i>n;n++){var o=t.getChildAt(n);e.addButtonScaleEffects(o)}},e.onButtonTouchBegan=function(e){var t=e.target;egret.Tween.get(t).to({scaleX:.9,scaleY:.9},50).to({scaleX:1,scaleY:1},50)},e.removeButtonScaleEffects=function(t){if(t)if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else for(var i=t.numChildren,n=0;i>n;n++){var o=t.getChildAt(n);e.removeButtonScaleEffects(o)}},e.removeSelf=function(t){e.removeFromParent(t)},e}();e.UIUtils=t,__reflect(t.prototype,"game.UIUtils")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.rang=function(e,t){return Math.round(Math.random()*(t-e)+e)},e.isRang=function(e,t,i){return e>=t&&i>=e},e.limit=function(e,t,i){return Math.max(t,Math.min(i,e))},e.ang2rad=function(e){return e/180*Math.PI},e.rad2ang=function(e){return e/Math.PI*180},e.getBigNumberShow=function(e){return 1e4>e?e+"":(e/=1e3,e.toFixed(1)+"K")},e.isElinArr=function(e,t){return t.indexOf(e)>-1},e.isArrCrossing=function(t,i){for(var n=0;n<t.length;n++)if(e.isElinArr(t[n],i))return!0;return!1},e.getURLQueryString=function(e){if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB){var t,i=decodeURIComponent(window.location.href);return i.indexOf("#?")>0?(i=i.replace("#?","&"),t=i.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"))):t=window.location.search.substr(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)")),t?t[2]:null}},e.getMaxStr=function(e){return e.length<=5?e:e.substr(0,5)+"..."},e}();e.Utils=t,__reflect(t.prototype,"game.Utils")}(game||(game={}));var game;!function(e){var t=function(t){function i(e){void 0===e&&(e=null);var n=t.call(this,i.NAME,e)||this;return n.type="scene",n.moveLock=!1,n}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[SceneNotify.OPEN_BALLON_SKIN,SceneNotify.CLOSE_BALLON_SKIN]},i.prototype.onRegister=function(){t.prototype.onRegister.call(this),this.facade.registerMediator(new e.StartMediator)},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case SceneNotify.OPEN_BALLON_SKIN:if(this.viewComponent)return;this.showViewComponent();break;case SceneNotify.CLOSE_BALLON_SKIN:this.closeViewComponent(1)}},i.prototype.showViewComponent=function(){this.viewComponent=new e.BallonSkinPanel,PopUpManager.addSceneUp(this.viewComponent)},i.prototype.initUI=function(){},i.prototype.initData=function(){},i.NAME="BallonSkinMediator",i}(BaseMediator);e.BallonSkinMediator=t,__reflect(t.prototype,"game.BallonSkinMediator")}(game||(game={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.addChild(GameLayerManager.gameLayer()),game.AppFacade.getInstance().startUp(GameLayerManager.gameLayer()),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=t.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return i.sent(),this.stage.removeChild(e),[3,5];case 4:return t=i.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){GameConfig.WINSIZE_WIDTH=this.stage.stageWidth,GameConfig.WINSIZE_HEIGHT=this.stage.stageHeight,game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_START),console.log("````````````````````````")},t}(eui.UILayer);__reflect(Main.prototype,"Main");var game;!function(e){var t=function(t){function i(e){void 0===e&&(e=null);var n=t.call(this,i.NAME,e)||this;return n.type="scene",n.moveLock=!1,n}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[SceneNotify.OPEN_GAME,SceneNotify.CLOSE_GAME]},i.prototype.onRegister=function(){t.prototype.onRegister.call(this),this.facade.registerMediator(new e.StartMediator),this.facade.registerMediator(new e.LoginMediator),this.facade.registerMediator(new e.GameOverMediator)},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case SceneNotify.OPEN_GAME:if(this.viewComponent)return;this.showViewComponent();break;case SceneNotify.CLOSE_GAME:this.closeViewComponent(1)}},i.prototype.showViewComponent=function(){this.viewComponent=new e.GameScene,PopUpManager.addSceneUp(this.viewComponent)},i.prototype.initUI=function(){},i.prototype.initData=function(){},i.NAME="GameMediator",i}(BaseMediator);e.GameMediator=t,__reflect(t.prototype,"game.GameMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(e){void 0===e&&(e=null);var n=t.call(this,i.NAME,e)||this;return n.type="scene",n.moveLock=!1,n}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[SceneNotify.OPEN_GAME_OVER,SceneNotify.CLOSE_GAME_OVER]},i.prototype.onRegister=function(){t.prototype.onRegister.call(this),this.facade.registerMediator(new e.StartMediator),this.facade.registerMediator(new e.GameMediator)},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case SceneNotify.OPEN_GAME_OVER:if(this.viewComponent)return;this.showViewComponent();break;case SceneNotify.CLOSE_GAME_OVER:this.closeViewComponent(1)}},i.prototype.showViewComponent=function(){this.viewComponent=new e.GameOverScene,PopUpManager.addSceneUp(this.viewComponent)},i.prototype.initUI=function(){},i.prototype.initData=function(){},i.NAME="GameOverMediator",i}(BaseMediator);e.GameOverMediator=t,__reflect(t.prototype,"game.GameOverMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(e){void 0===e&&(e=null);var n=t.call(this,i.NAME,e)||this;return n.type="scene",n.moveLock=!1,n}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[SceneNotify.OPEN_LOGIN,SceneNotify.CLOSE_LOGIN]},i.prototype.onRegister=function(){t.prototype.onRegister.call(this),this.facade.registerMediator(new e.StartMediator),this.facade.registerMediator(new e.GameMediator)},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case SceneNotify.OPEN_LOGIN:if(this.viewComponent)return;this.showViewComponent();break;case SceneNotify.CLOSE_LOGIN:this.closeViewComponent(1)}},i.prototype.showViewComponent=function(){this.viewComponent=new e.LoginScene,PopUpManager.addSceneUp(this.viewComponent)},i.prototype.initUI=function(){},i.prototype.initData=function(){},i.NAME="LoginMediator",i}(BaseMediator);e.LoginMediator=t,__reflect(t.prototype,"game.LoginMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(e){void 0===e&&(e=null);var n=t.call(this,i.NAME,e)||this;return n.type="scene",n.moveLock=!1,n}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[SceneNotify.OPEN_START,SceneNotify.CLOSE_START]},i.prototype.onRegister=function(){t.prototype.onRegister.call(this),this.facade.registerMediator(new e.GameMediator),this.facade.registerMediator(new e.LoginMediator),this.facade.registerMediator(new e.GameOverMediator),this.facade.registerMediator(new e.BallonSkinMediator)},i.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case SceneNotify.OPEN_START:if(this.viewComponent)return;this.showViewComponent();break;case SceneNotify.CLOSE_START:this.closeViewComponent(1)}},i.prototype.showViewComponent=function(){this.viewComponent=new e.StartScene;var t=GameLayerManager.gameLayer().sceneLayer;t.addChild(this.viewComponent)},i.prototype.initUI=function(){},i.prototype.initData=function(){},i.NAME="StartMediator",i}(BaseMediator);e.StartMediator=t,__reflect(t.prototype,"game.StartMediator")}(game||(game={}));var game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.addBackGround=function(){},t}(egret.Stage);e.AppContainer=t,__reflect(t.prototype,"game.AppContainer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="GameOverSkin",e}return __extends(i,t),i.prototype.init=function(){for(var e=0;1e4>=e;e++)egret.Tween.get(this.restartLabel.text).to({alpha:0},500),egret.Tween.get(this.restartLabel.text).to({alpha:1},500)},i.prototype.onTouchTap=function(t){switch(t.target){case this.backBtn:e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_START),e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_GAME_OVER);break;case this.restartLabel:e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_GAME_OVER),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_GAME)}},i}(e.BaseComponent);e.GameOverScene=t,__reflect(t.prototype,"game.GameOverScene")}(game||(game={}));var world=new p2.World,SHAPE={rect:"rect",circle:"circle"},CONTROL=Math.pow(2,0),OBSCALES=Math.pow(2,1),MButton=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(game.BasicButton);__reflect(MButton.prototype,"MButton");var ImageAnimation=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(game.imageAnimation);__reflect(ImageAnimation.prototype,"ImageAnimation");var Layout=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(game.imageLayout);__reflect(Layout.prototype,"Layout");var MoonEvent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this
}return __extends(t,e),t}(game.MoonEvent);__reflect(MoonEvent.prototype,"MoonEvent");var Const=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(game.Const);__reflect(Const.prototype,"Const");var game;!function(e){var t=function(){function t(){}return t.stageWidth=640,t.stageHeight=1136,t.FPS=60,t.version=e.Const.VER_DEBUG,t.isMobile=egret.Capabilities.isMobile,t.gameId=1,t.score=0,t.scoreHighest=0,t}();e.GameData=t,__reflect(t.prototype,"game.GameData");var i=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.color=16362243,e}return __extends(i,t),i.prototype.render=function(){t.prototype.render.call(this),this.createBgGradientFill();var i=new Sprite;this.addChild(i);var n=this.stageWidth,o=this.stageHeight,r=80,a=e.MoonUI.getRoundRect(n-100,r,16573853,10,10);a.x=n-a.width>>1,a.y=o-a.height>>1,i.addChild(a);var s=e.MoonUI.getRect(n-120,r-10,this.color);s.x=n-s.width>>1,s.y=o-s.height>>1,i.addChild(s),this.proWidth=s.width;var c=e.MoonUI.getRoundRect(n-120,r-10,0,10,10);c.x=n-c.width>>1,c.y=o-c.height>>1,s.mask=c,this.progress=s;var h=new e.MoonDisplayObject;h.type=e.Const.SHAPE_CIRCLE,h.data={r:r/2,c:14781965},h.setBackground(16777215,5),this.addChild(h),h.x=a.x+a.width-r/2,h.y=a.y+r/2,this.txtLoadPos=new egret.Point(h.x,h.y);var l=this.createText(0,0,"");l.size=40,l.textColor=11563776,this.txtLoad=l;var u=this.createText(0,0,"游戏加载");u.size=40,u.x=n-u.width>>1,u.y=a.y-2*u.height;var p=this.createText(0,0,"");p.size=40,this.txtName=p,this.updateName("敬请期待"),this.createAirFan(),this.airFan.x=h.x,this.airFan.y=h.y,this.createLogo(),this.update(0),this.play()},i.prototype.loop=function(e){return this.airFan.rotation+=3,!0},i.prototype.createAirFan=function(){this.airFan=new Sprite,this.addChild(this.airFan);for(var e=0;4>e;e++){var t=new Sprite;this.airFan.addChild(t),t.graphics.lineStyle(0),t.graphics.beginFill(16777215),t.graphics.cubicCurveTo(-29,-28,29,-28,0,0),t.graphics.endFill(),t.rotation=90*e}},i.prototype.createLogo=function(){var t=this.stageWidth,i=this.stageHeight,n=new e.MoonDisplayObject;n.type=e.Const.SHAPE_CIRCLE,n.data={r:50,c:14781965},n.setBackground(16777215,2),n.x=t>>1,n.y=n.height,this.addChild(n);var o=this.createText(0,0,"ZL");o.size=40,o.x=n.x-(o.width>>1),o.y=n.y-(o.height>>1)-15,o=this.createText(0,0,"game"),o.size=30,o.x=n.x-(o.width>>1),o.y=n.y-(o.height>>1)+15,this.addChild(e.MoonUI.getHeart(15,16777215)),o=this.createText(0,0,"子乐游戏"),o.size=40,o.textColor=14720801,o.x=t-o.width-10,o.y=i-o.height-10},i.prototype.createBgGradientFill=function(e,t){void 0===e&&(e=16635225),void 0===t&&(t=14720801);var i=this.stageWidth,n=this.stageHeight,o=new egret.Matrix;o.createGradientBox(2*i,2*n,Math.PI/2);var r=new Sprite;return r.graphics.beginGradientFill(egret.GradientType.RADIAL,[e,t],[1,1],[0,255],o),r.graphics.drawRect(0,0,i,n),this.addChild(r),r},i.prototype.updateName=function(e){this.txtName.text=e,this.txtName.x=this.stageWidth-this.txtName.width>>1,this.txtName.y=this.stageHeight/2+2*this.txtName.height},i.prototype.update=function(t){if(!(t>1)){t>.99&&this.stop(),this.progress.scaleX=t;var i=this.txtLoad,n=this.txtLoadPos;i.text=Math.ceil(100*t)+"%",i.x=this.stageWidth-i.width>>1,i.y=n.y-i.height/2;var o=e.MoonUI.getCircle(5+5*Math.random(),this.color,n.x,n.y);o.y=10-20*Math.random(),this.addChildAt(o,2),egret.Tween.get(o).to({x:-this.proWidth,alpha:0},1e3)}},i}(e.GameView);e.GameLoad=i,__reflect(i.prototype,"game.GameLoad");var n=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.render=function(){t.prototype.render.call(this),this.initView()},i.prototype.initView=function(){this.initGame()},i.prototype.initGame=function(){},i.prototype.start=function(){this.play()},i.prototype.pause=function(){this.stop()},i.prototype.loop=function(e){return!0},i.prototype.over=function(){},i.prototype.createImageBg=function(t){this.addChild(new e.Imag(t))},i.prototype.dispose=function(){this.stop(),t.prototype.dispose.call(this)},i}(e.GameView);e.BasicGamePanel=n,__reflect(n.prototype,"game.BasicGamePanel");var o=function(t){function i(){var e=t.call(this)||this;return e.score=0,e.level=-1,e.factor=50,e._isDebug=!1,e.removeSkins=[],e.j=0,e.l=2300,e.url1=["resource/data/LevelA00.json","resource/data/LevelA01.json","resource/data/LevelA02.json","resource/data/LevelA03.json","resource/data/LevelA04.json","resource/data/LevelB01.json","resource/data/LevelB02.json"],e.url2=["resource/data/LevelB01.json","resource/data/LevelB02.json","resource/data/LevelB03.json","resource/data/LevelB04.json","resource/data/LevelB05.json","resource/data/LevelB06.json","resource/data/LevelB07.json","resource/data/LevelB08.json","resource/data/LevelB09.json","resource/data/LevelB10.json"],e.armatureMap={},e.createScene(),e.createWorld(),e.createBallon(),e.loadResource(),e.updateScore(),e}return __extends(i,t),i.prototype.createObstacles=function(){this.updateLevel(),this.updateScore();for(var e=1001;1080>=e;e++)if(1==this.obj[e].isWall){if("triangle"==this.obj[e].name){var t=new p2.Body;t=this.addtriangleobstacles(this.obj[e].positionX,this.obj[e].positionY,[this.obj[e].impulseX,this.obj[e].impulseY],this.obj[e].gravity,this.obj[e].ratio,this.obj[e].img_name)}}else if("square"==this.obj[e].name){var i=new p2.Body;i=this.addobstacles(this.obj[e].positionX,this.obj[e].positionY,[this.obj[e].impulseX,this.obj[e].impulseY],this.obj[e].gravity,[this.obj[e].width,this.obj[e].height],this.obj[e].ratio,this.obj[e].mass,this.obj[e].angle,this.obj[e].delay)}else if("cycle"==this.obj[e].name){var n=new p2.Body;n=this.addCycleobstacles(this.obj[e].positionX,this.obj[e].positionY,[this.obj[e].impulseX,this.obj[e].impulseY],this.obj[e].gravity,this.obj[e].radius,this.obj[e].ratio,this.obj[e].delay)}else if("star"==this.obj[e].name){var o=new p2.Body;o=this.addStarobstacles(this.obj[e].positionX,this.obj[e].positionY,[this.obj[e].impulseX,this.obj[e].impulseY],this.obj[e].gravity,this.obj[e].ratio,this.obj[e].angleVelocity,this.obj[e].delay)}else if("cross"==this.obj[e].name){var r=new p2.Body;r=this.addcrossobstacles(this.obj[e].positionX,this.obj[e].positionY,[this.obj[e].impulseX,this.obj[e].impulseY],this.obj[e].gravity,this.obj[e].ratio,this.obj[e].angleVelocity,this.obj[e])}},i.prototype.updateLevel=function(){return this.level++,this.levelLabel.text="level: "+this.level,this.level},i.prototype.updateScore=function(){this.score=100*this.level,this.scoreLable.text="score:"+this.score},i.prototype.createScene=function(){var e=new egret.Sprite;e.graphics.drawRect(0,-21720,720,23e3);for(var t=0;t<=10*this.l;t+=this.l){this.n=Math.floor(5*Math.random()+1);var i=new egret.Bitmap;this.bg=new egret.Bitmap,this.bg1=new egret.Bitmap,this.bg2=new egret.Bitmap,this.bg3=new egret.Bitmap,this.bg4=new egret.Bitmap,this.bg5=new egret.Bitmap,this.bg6=new egret.Bitmap,this.bg4.texture=RES.getRes("bg"+this.n+"_4_png"),this.bg2.texture=RES.getRes("bg0_png"),this.bg3.texture=RES.getRes("bg01_png"),this.bg5.texture=RES.getRes("bg"+this.n+"_1_png"),this.bg6.texture=RES.getRes("bg"+this.n+"_2_png"),i.x=0,0==t?(i.y=-520,this.bg2.y=-620,this.bg4.y=-500,this.bg3.y=1780,this.bg5.y=this.bg3.y-135,this.bg6.y=this.bg3.y-270):(i.y=-520-t,this.bg2.y=-620-t,this.bg4.y=-500-t,this.bg3.y=1665-t,this.bg5.y=this.bg3.y-135,this.bg6.y=this.bg3.y-270),i.texture=RES.getRes("bg"+this.n+"_3_png"),e.addChild(i),this.bg2.x=0,this.bg3.x=0,this.bg4.x=0,this.bg5.x=0,this.bg6.x=0,e.addChild(this.bg6),e.addChild(this.bg5),e.addChild(this.bg3),e.addChild(this.bg2),e.addChild(this.bg4)}this.addChild(e),egret.Tween.get(e).to({x:0,y:10*this.l},150500),this.scoreLable=new egret.TextField,this.levelLabel=new egret.TextField,this.scoreLable.x=20,this.scoreLable.y=10,this.scoreLable.width=200,this.addChild(this.scoreLable),this.levelLabel.text="level:"+this.level,this.levelLabel.x=620,this.levelLabel.y=10,this.levelLabel.width=100,this.addChild(this.levelLabel)},i.prototype.createWorld=function(){var e=this,t=new p2.World;this.world=t,this.world.applyDamping=!1;var i=new p2.Plane,n=new p2.Body;n.addShape(i),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){var i=t.stageX,n=t.stageY;e.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(t){var o=t.stageX-i,r=t.stageY-n,a=e.world.bodies.ballon;a.displays[0];a.position[0]+=o,a.position[1]+=r},e)},this),this.addEventListener(egret.TouchEvent.TOUCH_END,function(){e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,function(e){},e)},this),egret.Ticker.getInstance().register(function(){this.world.step(.01);for(var e=egret.MainContext.instance.stage.stageHeight,t=this.world.bodies.length,i=0;t>i;i++){var n=this.world.bodies[i],o=n.displays[0];o&&(o.x=n.position[0],o.y=e-n.position[1],o.rotation=360-180*n.angle/Math.PI,n.sleepState==p2.Body.SLEEPING?o.alpha=.5:o.alpha=1)}},this),this.addConvexShape()},i.prototype.createBg=function(e,t,i){var n=Math.floor(5*Math.random()+1);this.bg=new egret.Bitmap,this.bg1=new egret.Bitmap,this.bg2=new egret.Bitmap,this.bg.texture=RES.getRes("bg"+n+"_2_png"),this.bg1.texture=RES.getRes("bg"+n+"_1_png"),this.bg2.texture=RES.getRes("bg0_png"),this.bg.x=0,this.bg.y=e,this.bg1.x=0,this.bg1.y=t,this.bg2.x=0,this.bg2.y=i},i.prototype.createBallon=function(){function e(e){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,t,this),c=e.stageX,h=e.stageY}function t(e){a=e.stageX-c,s=e.stageY-h,this.contact.position[0]+=a,this.contact.position[1]-=s,c=e.stageX,h=e.stageY}function i(e){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t,this)}var n=this,o=new p2.Circle({radius:25});this.contact=new p2.Body({mass:12,position:[385,375]}),o.collisionGroup=CONTROL,o.collisionMask=OBSCALES|CONTROL,this.contact.addShape(o),this.contact.gravityScale=0,this.contact.mass=0,this.contact.fixedRotation=!0,this.contact.damping=1,this.contact.type=p2.Body.KINEMATIC,this.world.addBody(this.contact);var r=this.createBitmapByName("circle_png");r.width=2*o.radius,r.height=2*o.radius,r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,this.contact.displays=[r],this.addChild(r),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this),r.addEventListener(egret.TouchEvent.TOUCH_END,i,this);var a,s,c,h,l=new p2.Circle({radius:70});this.ballon=new p2.Body({mass:12,position:[385,275]}),l.collisionGroup=CONTROL,l.collisionMask=OBSCALES|CONTROL,this.ballon.addShape(l),this.ballon.gravityScale=0,this.ballon.mass=0,this.ballon.fixedRotation=!0,this.ballon.fixedX=!0,this.ballon.fixedY=!0,this.ballon.type=p2.Body.KINEMATIC,this.ballon.userData=!0,this.ballon.damping=1,this.world.addBody(this.ballon),this.ballonPlay=this.createBitmapByName("balloon_png"),this.ballonPlay.width=2*l.radius,this.ballonPlay.height=2*l.radius,this.ballonPlay.anchorOffsetX=this.ballonPlay.width/2,this.ballonPlay.anchorOffsetY=this.ballonPlay.height/2,this.ballon.displays=[this.ballonPlay];var u=RES.getRes("qiqiu_ske_json"),p=RES.getRes("qiqiu_tex_json"),d=RES.getRes("qiqiu_tex_png"),g=new dragonBones.EgretFactory;g.parseDragonBonesData(u),g.parseTextureAtlasData(p,d);var f=g.buildArmatureDisplay("armatureName");f.animation.play("anIdle",0),this.addChild(f),f.x=this.ballon.position[0],f.y=1280-this.ballon.position[1]+175,this.addChild(f),console.log(this.ballonPlay.parent),this.world.on("beginContact",function(e){function t(e,t){e.bodyA,e.bodyB;switch(e.bodyA.id){case 3:t.playAnimation()}}t(e,n)})},i.prototype.loadResource=function(){var e=this,t=new egret.URLLoader,i=new egret.URLRequest;i.url=this.url1[this.j],t.load(i),t.addEventListener(egret.Event.COMPLETE,function(){var i=t.data;e.obj=JSON.parse(i),e.createObstacles()},this),egret.setInterval(function(){e.j++;var t=new egret.URLLoader,i=new egret.URLRequest;i.url=e.url1[e.j],t.load(i),t.addEventListener(egret.Event.COMPLETE,function(){var i=t.data;e.obj=JSON.parse(i),e.createObstacles()},e)},this,15e3)},i.prototype.addConvexShape=function(){var e=this,t=new egret.URLLoader,i=new egret.URLRequest;i.url="resource/data/BlockBox.json",t.load(i),t.addEventListener(egret.Event.COMPLETE,function(){var i=t.data;e.obj2=JSON.parse(i),e.createConvex(e.obj2)},this)},i.prototype.createConvex=function(e){for(var t=1001;1020>=t;t++)"blockStar1"==e[t].img_name?(this.blockStar1=new p2.Body,this.point=e[t].vertices,this.blockStar1.fromPolygon(e[t].vertices,{optimalDecomp:!1}),this.blockStar1.position[0]=60,this.blockStar1.position[1]=1220):"wallTriangle1"==e[t].img_name?this.testPoint=e[t].vertices:"wallTriangle2"==e[t].img_name&&(this.testPoint2=e[t].vertices)},i.prototype.playAnimation=function(){var t=RES.getRes("qiqiu_ske_json"),i=RES.getRes("qiqiu_tex_json"),n=RES.getRes("qiqiu_tex_png"),o=new dragonBones.EgretFactory;o.parseDragonBonesData(t),o.parseTextureAtlasData(i,n);var r=o.buildArmatureDisplay("armatureName");r.animation.play("aniDie",1),this.addChild(r),r.x=this.ballon.position[0],r.y=1280-this.ballon.position[1]+175,this.ballonPlay=new egret.DisplayObject;var a=new e.PlayerBean,s=a.Score;this.score>=s&&a.score==this.score},i.prototype.setMaterial=function(e,t){var i=this.material;e.shapes[0].material=i,t.shapes[0].material=i;var n=new p2.ContactMaterial(i,i,{restitution:.7,friction:0});this.world.addContactMaterial(n)},i.prototype.endContact=function(e){},i.prototype.addCycleobstacles=function(e,t,i,n,o,r,a){var s=i[0],c=i[1],h=new p2.Circle({radius:o*r}),l=new p2.Body({mass:100,position:[e+o/2,2300-t+o/2]});h.collisionGroup=OBSCALES,h.collisionMask=CONTROL|OBSCALES,l.addShape(h),this.world.addBody(l),0==a?l.velocity=[s,c]:egret.setTimeout(function(){l.velocity=[s,c]},this,a),l.gravityScale=0;var u=this.createBitmapByName("blockCircle1_png");return u.width=2*h.radius,u.height=2*h.radius,u.anchorOffsetX=u.width/2,u.anchorOffsetY=u.height/2,l.displays=[u],this.addChild(u),l},i.prototype.addobstacles=function(e,t,i,n,o,r,a,s,c){var h=i[0],l=i[1],u=o[0],p=o[1],d=new p2.Box({width:u*r,height:p*r}),g=new p2.Body({mass:a,angle:180-s});90==s?g.position=[e,2300-t]:g.position=[e+u/6*Math.cos(180-s),2300-t],d.collisionGroup=OBSCALES,d.collisionMask=CONTROL|OBSCALES,g.addShape(d),this.world.addBody(g),0==c?g.velocity=[h,l]:egret.setTimeout(function(){g.velocity=[h,l]},this,c),g.gravityScale=.1,g.angle=(180-s)*Math.PI/180,this.world.addBody(g);var f=this.createBitmapByName("blockSquare1_png");return f.width=d.width,f.height=d.height,f.anchorOffsetX=f.width/2,f.anchorOffsetY=f.height/2,g.displays=[f],this.addChild(f),g},i.prototype.addStarobstacles=function(e,t,i,n,o,r,a){var s=i[0],c=i[1],h=new p2.Body({mass:1}),l=new p2.Circle({radius:60*o});h.position[0]=e,h.position[1]=2300-t,0==a?h.velocity=[s,c]:egret.setTimeout(function(){h.velocity=[s,c]},this,a),h.gravityScale=n,l.collisionGroup=OBSCALES,l.collisionMask=CONTROL|OBSCALES,h.angularVelocity=r*Math.PI/180,h.addShape(l),this.world.addBody(h);var u=this.createBitmapByName("blockStar1_png");return u.width=120*o,u.height=120*o,u.anchorOffsetX=60*o,u.anchorOffsetY=60*o,h.displays=[u],this.addChild(u),h},i.prototype.addtriangleobstacles=function(e,t,i,n,o,r){for(var a=i[0],s=i[1],c=1001;1020>=c;c++){if("wallTriangle1"==r){var h=new p2.Convex({vertices:[[e,t],[e,t-1400],[e+240,t-1400]]}),l=new p2.Body;l.position=[e,2300-t],l.velocity=[a,s],h.collisionGroup=OBSCALES,h.collisionMask=CONTROL|OBSCALES,l.type=p2.Body.KINEMATIC,l.addShape(h),this.world.addBody(l);var u=this.createBitmapByName("wallTriangle1_png");return u.width=240*o,u.height=1400*o,l.displays=[u],this.addChild(u),l}if("wallTriangle2"==r){var p=new p2.Convex({vertices:[[e,t],[e-240,t-1400],[e,t-1400]]}),d=new p2.Body;d.position=[e,2300-t],d.velocity=[a,s],p.collisionGroup=OBSCALES,p.collisionMask=CONTROL|OBSCALES,d.type=p2.Body.KINEMATIC,d.addShape(p),this.world.addBody(d);var g=this.createBitmapByName("wallTriangle2_png");return g.width=240*o,g.height=1400*o,d.displays=[g],this.addChild(g),d}}},i.prototype.addcrossobstacles=function(e,t,i,n,o,r,a){var s=i[0],c=i[1],h=new p2.Body({mass:1});h.fromPolygon([[e,t],[e,t-45*o],[e-45*o,t-45*o],[e-45*o,t-75*o],[e,t-75*o],[e,t-120*o],[e+30*o,t-120*o],[e+30*o,t-75*o],[e+75*o,t-75*o],[e+75*o,t-45*o],[e+30*o,t-45*o],[e+30*o,t]],{optimalDecomp:!1}),h.position=[e,2300-t],h.velocity=[s,c],this.world.addBody(h),0==a?h.velocity=[s,c]:egret.setTimeout(function(){h.velocity=[s,c]},this,a),h.gravityScale=.1,h.angularVelocity=r*Math.PI/180,this.world.addBody(h);var l=this.createBitmapByName("blockCross1_png");return l.width=120*o,l.height=120*o,l.anchorOffsetX=60*o,l.anchorOffsetY=60*o,h.displays=[l],this.addChild(l),h},i.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},i.prototype.tiaozhuan=function(){e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_GAME),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_GAME_OVER)},i.prototype.setAndBallHit=function(e){var t=e.shapes[0];t.collisionMask=6},i}(e.BasicGamePanel);e.GameScene=o,__reflect(o.prototype,"game.GameScene");var r=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.render=function(){t.prototype.render.call(this),this.initView()},i.prototype.initView=function(){var e=this.createBackground();e.alpha=.5},i.prototype.createBtn=function(e){var t=this.createButton(e);return t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),t.x=this.stageWidth-t.width>>1,t.y=this.stageHeight-t.height>>1,t},i.prototype.createTitle=function(e){var t=this.createText(0,0,e);return t.x=(this.stageWidth-t.width)/2,t.y=(this.stageHeight-t.height)/2-100,t},i.prototype.onClick=function(t){this.dispEvent(e.MoonEvent.START),egret.Tween.get(this).to({alpha:0},300).call(this.backCall,this)},i.prototype.backCall=function(e){this.removeFromParent()},i.prototype.createImageBg=function(t){this.addChild(new e.Imag(t))},i}(e.GameView);e.BasicGameStart=r,__reflect(r.prototype,"game.BasicGameStart");var a=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initView=function(){var e=this.createBackground();e.alpha=.5,this.btnRestart=this.createBtn("再来一次"),this.btnRank=this.createBtn("排行榜"),this.btnRank.y+=100,this.txtScore=this.createText(),this.txtLevel=this.createText()},i.prototype.update=function(e){this.txtScore.text="score:"+e.score,this.txtLevel.text="level:"+e.level,this.txtScore.x=(this.stageWidth-this.txtScore.width)/2,this.txtLevel.x=(this.stageWidth-this.txtLevel.width)/2,this.txtScore.y=(this.stageHeight-this.txtScore.height)/2-60,this.txtLevel.y=this.txtScore.y-60,t.score=e.score},i.prototype.onClick=function(t){var i=t.currentTarget;i==this.btnRestart?e.prototype.onClick.call(this,t):i==this.btnRank},i}(r);e.BasicGameOver=a,__reflect(a.prototype,"game.BasicGameOver");var s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.render=function(){t.prototype.render.call(this),this.initView()},i.prototype.initView=function(){var t=this.createBackground(0,.5);this.addChild(t);var i=new e.MoonDisplayObject,n=this.stageWidth>>1,o=16750848;i.type=e.Const.SHAPE_RECT_ROUND,i.data={w:1.1*n,h:n,ew:100,eh:100,c:o},i.setBackground(16777215,5),i.x=t.width-n>>1,i.y=t.height-n>>1,this.addChild(i);var r=new e.Label("背景音乐",16777215),a=new e.Label("游戏音效",16777215);r.textField.size=40,a.textField.size=40,r.x=a.x=50,r.y=50,a.y=150,i.addChild(r),i.addChild(a);var s=this.getToggleSwitch();s.x=r.x+r.width+10,s.y=r.y-5,i.addChild(s),this.btnSoundBg=s;var s=this.getToggleSwitch();s.x=a.x+a.width+10,s.y=a.y-5,i.addChild(s),this.btnSoundEffect=s;var c=new MButton;c.label="关  闭",c.x=i.width-c.width>>1,c.y=240,c.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),i.addChild(c),this.btnClose=c},i.prototype.getToggleSwitch=function(){var t=e.Skin.switchOn,i=e.Skin.switchOn,n=e.MoonUI.getSwitch(e.Color.bule,e.Color.white),o=e.MoonUI.getSwitch(e.Color.red,e.Color.white),r=new e.MoreSkinButton([t,i,n,o]);return r.toggleSwitch=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),r},i.prototype.onClick=function(e){e.currentTarget},i.prototype.setValue=function(){},i.SOUND_BG="sound bg",i.SOUND_EFFECT="sound effect",i}(e.BasicView);e.BasicGameSet=s,__reflect(s.prototype,"game.BasicGameSet");var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.create=function(e){var t=new egret.Sprite;t.graphics.drawRect(0,-2e3,720,3280),t.graphics.beginFill(e);var i=new egret.Bitmap;return i.texture=RES.getRes("001_png"),i.x=0,i.y=1035,t.addChild(i),t},t}(egret.Sprite);e.backGround=c,__reflect(c.prototype,"game.backGround");var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.loadResource=function(){var e=this,t=new egret.URLLoader,i=new egret.URLRequest;return i.url="resource/data/BlockBox.json",t.load(i),t.addEventListener(egret.Event.COMPLETE,function(){var i=t.data;e.obj=JSON.parse(i),e.point=e.obj[1001].vertices,e.convex=new p2.Body,e.convex.fromPolygon(e.point,{optimalDecomp:!1})},this),this.convex},t}(egret.DisplayObject);e.convex=h,__reflect(h.prototype,"game.convex")}(game||(game={}));var game;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.BaseComponent);e.LoginScene=t,__reflect(t.prototype,"game.LoginScene")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="StartSceneSkin",e}return __extends(i,t),i.prototype.init=function(){var t=new e.PlayerBean;t.BalloonImag},i.prototype.onTouchTap=function(t){switch(t.target){case this.startBtn:e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_START),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_GAME);break;case this.infoBtn:break;case this.rankBtn:this.getRank();break;case this.skinBtn:this.chooseSkin();break;case this.starBtn:}},i.prototype.getRank=function(){},i.prototype.chooseSkin=function(){e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_BALLON_SKIN)},i}(e.BaseComponent);e.StartScene=t,__reflect(t.prototype,"game.StartScene")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="BallonSkin",e}return __extends(i,t),i.prototype.init=function(){this.skinList.itemRenderer=e.BallSkinItem;var t=[1,2,3,4,5];this.skinList.dataProvider=new eui.ArrayCollection(t)},i.prototype.onTouchTap=function(t){switch(t.target){case this.selectBtn:this.chooseSkin(t),e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_BALLON_SKIN),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_START)}},i.prototype.chooseSkin=function(t){new e.PlayerBean,this.skinScroller.viewport.name},i}(e.BaseComponent);e.BallonSkinPanel=t,__reflect(t.prototype,"game.BallonSkinPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="BallSkinItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data)for(var i=0;i<=this.data.length;i++){new t;this.ballSkinImag.source="resource/assets/balloon_skin"+i+".png",this.addChild(this.ballSkinImag)}},t}(eui.ItemRenderer);e.BallSkinItem=t,__reflect(t.prototype,"game.BallSkinItem")}(game||(game={}));var game;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.curScore=0,i.moveX=0,i.moveY=0,i.init(t),i}return __extends(t,e),t.prototype.init=function(e){this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth,this.setUI()},t.prototype.setUI=function(){var e=this.stageW,t=this.stageH,i=new egret.TextField;this.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=.05*e,i.y=.05*t,i.size=30,i.textAlign="center",i.text="0",i.textColor=16777215,i.fontFamily="Arial",i.italic=!0,this.scoreLabel=i;var n=new egret.TextField;this.addChild(n),n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.x=.85*e,n.y=.05*t,n.size=30,n.textAlign="center",n.text="0",n.textColor=16777215,n.fontFamily="Arial",n.italic=!0,this.levelLabel=n,this.timer=new egret.Timer(1e3,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.touchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchStart,this)},t.prototype.updataScore=function(e){this.curScore=e,this.scoreLabel.text=""+e},t.prototype.touchStart=function(e){this.moveX=e.stageX/this.factor,this.moveY=e.stageY/this.factor},t.prototype.touchMove=function(e){this.ballonBody;egret.Tween.get(this.ballonBody).to({x:this.moveX,y:this.moveY})},t}(egret.Sprite);e.GameControl=t,__reflect(t.prototype,"game.GameControl")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.removeBodys=[],t.world=new p2.World({gravity:[0,0]}),t.addEventListener(egret.Event.ENTER_FRAME,t.updateWorld,t),t}return __extends(t,e),t.prototype.init=function(){var e=this,t=new egret.URLLoader,i=new egret.URLRequest;i.method=egret.URLRequestMethod.GET,t.dataFormat=egret.URLLoaderDataFormat.TEXT,i.url="resource/assets/blockBox.xml",t.load(i),t.addEventListener(egret.Event.COMPLETE,function(){var i=t.data;e.data=i,console.log(egret.XML.parse(i))},this),this.ondataChange(this.data)},t.prototype.ondataChange=function(e){for(var t=0;t<e.children[0].children.length;t++)"CIRCLE"==e.children[0].children[t].children.type?this.createBallon(e.children[0].children[t].children.children.r,p2.Body.DYNAMIC,1,[0,0],[100,100],[10,10]):this.createConvexBodyShape([0,100],p2.Body.DYNAMIC,[1,0],[0,100],[10,0])},t.prototype.updateWorld=function(e){var t=1/60,i=this.removeBodys;this.world.step(t);for(var n=this.world.bodies,o=n.length,r=0;o>r;r++){var a=n[r];if(a.userData&&a.userData.skin){var s=a.userData.skin;s.x=a.position[0],s.y=a.position[1],s.rotation=180*a.angle/Math.PI}else!(a.shapes[0]instanceof p2.Plane)}for(r=0;r<i.length;r++)a=i[r],a.userData&&a.userData.skin&&(s=a.userData.skin,null!=s.parent,a.userData=null),this.world.removeBody(a)},t.prototype.getBody=function(e,t,i,n,o){void 0===e&&(e=0),void 0===t&&(t=p2.Body.DYNAMIC);var r=new p2.Body({mass:e});return r.type=t,r.userData={},r.applyImpulse(i,n),r},t.prototype.createBallon=function(e,t,i,n,o,r){void 0===t&&(t=p2.Body.DYNAMIC),void 0===i&&(i=0);var a=this.getBody(10,t,[0,0],o,r),s=new p2.Circle({radius:e});return a.addShape(s),this.world.addBody(a),a},t.prototype.createConvexBodyShape=function(e,t,i,n,o){void 0===t&&(t=p2.Body.DYNAMIC);var r=this.getBody(10,t,i,n,o);return r.fromPolygon(e,{optimalDecomp:!1}),this.world.addBody(r),r},t.prototype.createPolygon=function(e,t,i,n,o,r){void 0===e&&(e=3),void 0===t&&(t=30),void 0===i&&(i=p2.Body.DYNAMIC);for(var a=(this.getBody(10,i,n,o,r),[]),s=0;e>s;s++){var c=Math.cos(s*(360/e)*Math.PI/180)*t,h=Math.sin(s*(360/e)*Math.PI/180)*t;a.push([c,h])}return this.createConvexBodyShape(a,i,n,o,r)},t}(egret.Sprite);e.LevelItem=t,__reflect(t.prototype,"game.LevelItem")}(game||(game={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}var a=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(n,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);